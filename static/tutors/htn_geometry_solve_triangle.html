<div style="display: flex; justify-content: center; align-items: center;">
  <form class="" style="width: 650px;">

    <div class="container" style="margin: 3%;">
      <div class="row">
        <div class="col-sm">
          <div style="text-align: center;">
            <h3>Geometry — Solve Triangle (sides/angles)</h3>
            <br>
            <h4>Given:</h4>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm"></div>
        <div class="col-sm" style="width: 250px">
          <math-field disabled="true" id="initial_problem" style="width: 360px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
        <div class="col-sm"></div>
      </div>
    </div>

    <!-- Level 1: Normalize + Classify -->
    <div class="container level_1" style="margin: 2%; display:none;">
      <div class="row" style="display: flex; align-items: center;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Normalize inputs (write OK):</label>
          <math-field id="normalize_inputs" class="level_2" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
          <div style="margin-left: 10px;"><button id="level_2" class="btn btn-danger scaffold">+</button></div>
        </div>
      </div>
      <div class="row" style="display: flex; align-items: center; margin-top: 10px;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Classify (RightTriangleTrig / LawOfSines / LawOfCosines / SimilarityScaling / AreaRelations):</label>
          <input id="classify_triangle" class="level_2" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"/>
        </div>
      </div>
    </div>

    <!-- Level 2: Method-specific core step(s) -->
    <div class="container level_2" style="margin: 2%; display:none;">
      <p><strong>Right-triangle step(s)</strong></p>
      <div class="row" style="display: flex; align-items: center;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Pythagorean (enter c):</label>
          <math-field id="apply_pythagorean" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
      </div>
      <div class="row" style="display: flex; align-items: center; margin-top: 10px;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Trig ratios (enter sin A):</label>
          <math-field id="use_trig_ratios" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
      </div>
      <hr>
      <p><strong>Law of Sines step(s)</strong></p>
      <div class="row" style="display: flex; align-items: center;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">SSA ambiguity (unique/ambiguous):</label>
          <input id="resolve_ssa_ambiguity" class="" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"/>
        </div>
      </div>
      <div class="row" style="display: flex; align-items: center; margin-top: 10px;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Compute missing angle (enter B):</label>
          <math-field id="compute_missing_angles" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
      </div>
      <div class="row" style="display: flex; align-items: center; margin-top: 10px;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Compute missing side (enter b):</label>
          <math-field id="compute_missing_sides" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
      </div>
      <hr>
      <p><strong>Law of Cosines step(s)</strong></p>
      <div class="row" style="display: flex; align-items: center;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Cosine formula (enter c):</label>
          <math-field id="compute_unknown_by_cosine" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
      </div>
      <div class="row" style="display: flex; align-items: center; margin-top: 10px;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Backfill with sines (write OK):</label>
          <math-field id="backfill_with_sines_if_needed" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
      </div>
      <hr>
      <p><strong>Similarity step(s)</strong></p>
      <div class="row" style="display: flex; align-items: center;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Map correspondence (e.g., A→A'):</label>
          <input id="map_correspondence" class="" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"/>
        </div>
      </div>
      <div class="row" style="display: flex; align-items: center; margin-top: 10px;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Scale sides/angles (enter scaled side):</label>
          <math-field id="scale_sides_angles" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
        </div>
      </div>
      <hr>
      <p><strong>Area relation step(s)</strong></p>
      <div class="row" style="display: flex; align-items: center;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Select area formula (write it or OK):</label>
          <input id="select_area_formula" class="" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"/>
        </div>
      </div>
    </div>

    <!-- Level 0: Final numeric piece -->
    <div class="container level_0" style="margin: 2%;">
      <div class="row" style="display: flex; align-items: center;">
        <div class="col" style="display: flex; align-items: center;">
          <label class="form-label" style="width: 300px; margin-right: 20px">Compute final value (area or last side):</label>
          <math-field id="compute_area" class="level_1" virtual-keyboard-mode="onfocus" style="width: 220px; border: 1px solid rgba(0, 0, 0, .3);"></math-field>
          <div style="margin-left: 10px;"><button id="level_1" class="btn btn-danger scaffold">+</button></div>
        </div>
      </div>
    </div>

  </form>
</div>

